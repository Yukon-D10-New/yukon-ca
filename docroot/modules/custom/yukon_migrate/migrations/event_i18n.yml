id: event_i18n
label: Event
migration_tags:
  - Drupal 7
  - Content
  - event
migration_group: legacy
source:
  plugin: d7_node_entity_translation
  node_type: event
destination:
  plugin: entity:node
  translations: true
  destination_module: content_translation
process:
  uid:
    plugin: kellett_author
  nid:
    plugin: migration_lookup
    migration: event
    source: entity_id
  langcode:
    plugin: default_value
    default_value: fr
  created: created
  promote: promote
  sticky: sticky
  revision_log: log
  type:
    plugin: default_value
    default_value: event
  title:
    plugin: skip_on_empty
    method: row
    source: title
  field_page_description: field_page_description
  field_event_start_time:
    -
      plugin: sub_process
      source: field_event_start_time
      process:
        value:
          -
            plugin: format_date
            from_format: 'Y-m-d H:i:s'
            to_format: 'Y-m-d\TH:i:s'
            source: value
        end_value:
          -
            plugin: format_date
            from_format: 'Y-m-d H:i:s'
            to_format: 'Y-m-d\TH:i:s'
            source: value2
        timezone:
          -
            plugin: default_value
            default_value: 'America/Whitehorse'
        rrule:
          -
            plugin: get
            source: rrule
  field_contact_name: field_contact_name
  field_contact_email: field_contact_email
  field_postal_code: field_postal_code
  field_contact_phone: field_contact_phone
  field_building_name:
    plugin: node_reference
  field_event_street_address: field_event_street_address/0/value
  field_event_locality_town: field_event_locality_town/0/value
  field_cost: field_cost
  field_event_description/value: field_event_description/0/value
  field_event_description/format:
    plugin: default_value
    default_value: basic_html
  field_featured_event: field_featured_event
  field_featured_image:
    plugin: imagemedia
  field_event_website:
    -
      plugin: sub_process
      source: field_event_website
      process:
        uri: url
        title: title
        attributes: attributes
  field_link_title:
    -
      plugin: sub_process
      source: field_link_title
      process:
        uri: url
        title: title
        attributes: attributes
  field_community:
    plugin: kellett_taxonomy
  field_category_type:
    plugin: kellett_taxonomy
  field_department_term:
    plugin: kellett_taxonomy
  field_yukon_editorial_team:
    plugin: kellett_taxonomy
  content_translation_source: source
  content_translation_outdated: translate
migration_dependencies:
  required:
    - event
